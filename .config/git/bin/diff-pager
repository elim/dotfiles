#!/bin/sh -eu

scripts () {
  echo "/usr/local/share/git-core/contrib/diff-highlight/diff-highlight"
       "/usr/share/doc/git/contrib/diff-highlight/diff-highlight"
}

diff_pager () {
  for s in $(scripts); do
    [ -f "${s}" ] && script=$s; break
  done

  if [ -z "${script+x}" ]; then
    cat - | ${PAGER}
    exit 0
  fi

  cat - | perl "${script}" | ${PAGER}
}

diff_pager
